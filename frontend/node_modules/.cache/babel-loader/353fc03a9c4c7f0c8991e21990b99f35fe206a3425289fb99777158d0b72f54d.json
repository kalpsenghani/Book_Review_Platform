{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"F:\\\\Desktop\\\\book-review-platform\\\\frontend\\\\src\\\\pages\\\\NewReviewPage.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport \"./NewReviewPage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.NODE_ENV === \"production\" ? \"/api\" : \"http://localhost:5000/api\";\nfunction NewReviewPage() {\n  _s();\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [books, setBooks] = useState([]);\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [formData, setFormData] = useState({\n    book_id: searchParams.get(\"bookId\") || \"\",\n    rating: 0,\n    title: \"\",\n    content: \"\"\n  });\n  useEffect(() => {\n    const fetchBooks = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/books`);\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.message || `Failed to fetch books: ${response.status}`);\n        }\n        const data = await response.json();\n        if (!data.data || !Array.isArray(data.data)) {\n          throw new Error('Invalid response format from server');\n        }\n        setBooks(data.data);\n\n        // If bookId is provided in URL, find and set the selected book\n        if (formData.book_id) {\n          const book = data.data.find(b => b._id === formData.book_id);\n          if (book) setSelectedBook(book);\n        }\n      } catch (error) {\n        console.error('Error fetching books:', error);\n        setError(error.message || 'Failed to load books. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchBooks();\n  }, [formData.book_id]);\n  const handleBookSelect = e => {\n    const bookId = e.target.value;\n    const book = books.find(b => b._id === bookId);\n    setSelectedBook(book || null);\n    setFormData({\n      ...formData,\n      book_id: bookId\n    });\n  };\n  const handleRatingClick = rating => {\n    setFormData({\n      ...formData,\n      rating\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Validate form data\n    if (!formData.book_id) {\n      setError(\"Please select a book\");\n      return;\n    }\n    if (!formData.rating) {\n      setError(\"Please provide a rating\");\n      return;\n    }\n    if (!formData.title.trim()) {\n      setError(\"Please provide a review title\");\n      return;\n    }\n    if (!formData.content.trim()) {\n      setError(\"Please write your review\");\n      return;\n    }\n    setSubmitting(true);\n    setError(null);\n    try {\n      const response = await fetch(`${API_BASE_URL}/reviews`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          book: formData.book_id,\n          rating: formData.rating,\n          title: formData.title.trim(),\n          content: formData.content.trim(),\n          user: \"65f1a2b3c4d5e6f7g8h9i0j1\",\n          // Temporary user ID\n          user_name: \"Anonymous User\" // Required field\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `Failed to submit review: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Review submitted successfully:', data);\n\n      // Redirect to the book page\n      navigate(`/books/${formData.book_id}`);\n    } catch (error) {\n      console.error('Error submitting review:', error);\n      setError(error.message || \"Failed to submit review. Please try again.\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const renderStars = () => {\n    return Array.from({\n      length: 5\n    }, (_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: () => handleRatingClick(i + 1),\n      className: `star-button ${i < formData.rating ? \"filled\" : \"\"}`,\n      children: \"\\u2B50\"\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this));\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-container\",\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n        size: \"lg\",\n        text: \"Loading books...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"new-review-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-form-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-form-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Write a Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-content\",\n            children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-container\",\n              children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                message: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              className: \"review-form\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"book\",\n                  children: \"Select Book\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"book\",\n                  value: formData.book_id,\n                  onChange: handleBookSelect,\n                  className: \"form-select\",\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Choose a book to review\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 21\n                  }, this), books.map(book => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: book._id,\n                    children: [book.title, \" by \", book.author]\n                  }, book._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this), selectedBook && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"selected-book\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: selectedBook.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"book-author\",\n                  children: [\"by \", selectedBook.author]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"book-genre\",\n                  children: selectedBook.genre\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Rating\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rating-input\",\n                  children: [renderStars(), formData.rating > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rating-text\",\n                    children: [formData.rating, \" out of 5 stars\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"title\",\n                  children: \"Review Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"title\",\n                  type: \"text\",\n                  placeholder: \"Give your review a title\",\n                  value: formData.title,\n                  onChange: e => setFormData({\n                    ...formData,\n                    title: e.target.value\n                  }),\n                  className: \"form-input\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"content\",\n                  children: \"Review\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"content\",\n                  placeholder: \"Share your thoughts about this book...\",\n                  rows: 6,\n                  value: formData.content,\n                  onChange: e => setFormData({\n                    ...formData,\n                    content: e.target.value\n                  }),\n                  className: \"form-textarea\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  disabled: submitting,\n                  className: \"btn btn-primary\",\n                  children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(LoadingSpinner, {\n                      size: \"sm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Submitting...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 237,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true) : \"Submit Review\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => navigate(-1),\n                  disabled: submitting,\n                  className: \"btn btn-outline\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n_s(NewReviewPage, \"XRHRqoqqehuTWK1iCnap3faOgNY=\", false, function () {\n  return [useNavigate, useSearchParams];\n});\n_c = NewReviewPage;\nexport default NewReviewPage;\nvar _c;\n$RefreshReg$(_c, \"NewReviewPage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useEffect","useState","useNavigate","useSearchParams","LoadingSpinner","ErrorMessage","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","process","env","NODE_ENV","NewReviewPage","navigate","searchParams","books","setBooks","selectedBook","setSelectedBook","loading","setLoading","submitting","setSubmitting","error","setError","formData","setFormData","book_id","get","rating","title","content","fetchBooks","response","fetch","ok","errorData","json","catch","Error","message","status","data","Array","isArray","book","find","b","_id","console","handleBookSelect","e","bookId","target","value","handleRatingClick","handleSubmit","preventDefault","trim","method","headers","body","JSON","stringify","user","user_name","log","renderStars","from","length","_","i","type","onClick","className","children","fileName","lineNumber","columnNumber","size","text","onSubmit","htmlFor","id","onChange","required","map","author","genre","placeholder","rows","disabled","_c","$RefreshReg$"],"sources":["F:/Desktop/book-review-platform/frontend/src/pages/NewReviewPage.js"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useNavigate, useSearchParams } from \"react-router-dom\"\nimport LoadingSpinner from \"../components/LoadingSpinner\"\nimport ErrorMessage from \"../components/ErrorMessage\"\nimport \"./NewReviewPage.css\"\n\nconst API_BASE_URL = process.env.NODE_ENV === \"production\" ? \"/api\" : \"http://localhost:5000/api\"\n\nfunction NewReviewPage() {\n  const navigate = useNavigate()\n  const [searchParams] = useSearchParams()\n\n  const [books, setBooks] = useState([])\n  const [selectedBook, setSelectedBook] = useState(null)\n  const [loading, setLoading] = useState(false)\n  const [submitting, setSubmitting] = useState(false)\n  const [error, setError] = useState(null)\n\n  const [formData, setFormData] = useState({\n    book_id: searchParams.get(\"bookId\") || \"\",\n    rating: 0,\n    title: \"\",\n    content: \"\",\n  })\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      setLoading(true)\n      setError(null)\n      try {\n        const response = await fetch(`${API_BASE_URL}/books`)\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(errorData.message || `Failed to fetch books: ${response.status}`)\n        }\n        const data = await response.json()\n        if (!data.data || !Array.isArray(data.data)) {\n          throw new Error('Invalid response format from server')\n        }\n        setBooks(data.data)\n\n        // If bookId is provided in URL, find and set the selected book\n        if (formData.book_id) {\n          const book = data.data.find((b) => b._id === formData.book_id)\n          if (book) setSelectedBook(book)\n        }\n      } catch (error) {\n        console.error('Error fetching books:', error)\n        setError(error.message || 'Failed to load books. Please try again later.')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchBooks()\n  }, [formData.book_id])\n\n  const handleBookSelect = (e) => {\n    const bookId = e.target.value\n    const book = books.find((b) => b._id === bookId)\n    setSelectedBook(book || null)\n    setFormData({ ...formData, book_id: bookId })\n  }\n\n  const handleRatingClick = (rating) => {\n    setFormData({ ...formData, rating })\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    // Validate form data\n    if (!formData.book_id) {\n      setError(\"Please select a book\")\n      return\n    }\n    if (!formData.rating) {\n      setError(\"Please provide a rating\")\n      return\n    }\n    if (!formData.title.trim()) {\n      setError(\"Please provide a review title\")\n      return\n    }\n    if (!formData.content.trim()) {\n      setError(\"Please write your review\")\n      return\n    }\n\n    setSubmitting(true)\n    setError(null)\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/reviews`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          book: formData.book_id,\n          rating: formData.rating,\n          title: formData.title.trim(),\n          content: formData.content.trim(),\n          user: \"65f1a2b3c4d5e6f7g8h9i0j1\", // Temporary user ID\n          user_name: \"Anonymous User\" // Required field\n        }),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        throw new Error(errorData.message || `Failed to submit review: ${response.status}`)\n      }\n\n      const data = await response.json()\n      console.log('Review submitted successfully:', data)\n\n      // Redirect to the book page\n      navigate(`/books/${formData.book_id}`)\n    } catch (error) {\n      console.error('Error submitting review:', error)\n      setError(error.message || \"Failed to submit review. Please try again.\")\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const renderStars = () => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <button\n        key={i}\n        type=\"button\"\n        onClick={() => handleRatingClick(i + 1)}\n        className={`star-button ${i < formData.rating ? \"filled\" : \"\"}`}\n      >\n        ‚≠ê\n      </button>\n    ))\n  }\n\n  if (loading) {\n    return (\n      <div className=\"page-container\">\n        <LoadingSpinner size=\"lg\" text=\"Loading books...\" />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"new-review-page\">\n      <div className=\"container\">\n        <div className=\"review-form-container\">\n          <div className=\"review-form-card\">\n            <div className=\"form-header\">\n              <h1>Write a Review</h1>\n            </div>\n            <div className=\"form-content\">\n              {error && (\n                <div className=\"error-container\">\n                  <ErrorMessage message={error} />\n                </div>\n              )}\n\n              <form onSubmit={handleSubmit} className=\"review-form\">\n                {/* Book Selection */}\n                <div className=\"form-group\">\n                  <label htmlFor=\"book\">Select Book</label>\n                  <select\n                    id=\"book\"\n                    value={formData.book_id}\n                    onChange={handleBookSelect}\n                    className=\"form-select\"\n                    required\n                  >\n                    <option value=\"\">Choose a book to review</option>\n                    {books.map((book) => (\n                      <option key={book._id} value={book._id}>\n                        {book.title} by {book.author}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Selected Book Info */}\n                {selectedBook && (\n                  <div className=\"selected-book\">\n                    <h3>{selectedBook.title}</h3>\n                    <p className=\"book-author\">by {selectedBook.author}</p>\n                    <p className=\"book-genre\">{selectedBook.genre}</p>\n                  </div>\n                )}\n\n                {/* Rating */}\n                <div className=\"form-group\">\n                  <label>Rating</label>\n                  <div className=\"rating-input\">\n                    {renderStars()}\n                    {formData.rating > 0 && <span className=\"rating-text\">{formData.rating} out of 5 stars</span>}\n                  </div>\n                </div>\n\n                {/* Review Title */}\n                <div className=\"form-group\">\n                  <label htmlFor=\"title\">Review Title</label>\n                  <input\n                    id=\"title\"\n                    type=\"text\"\n                    placeholder=\"Give your review a title\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    className=\"form-input\"\n                    required\n                  />\n                </div>\n\n                {/* Review Content */}\n                <div className=\"form-group\">\n                  <label htmlFor=\"content\">Review</label>\n                  <textarea\n                    id=\"content\"\n                    placeholder=\"Share your thoughts about this book...\"\n                    rows={6}\n                    value={formData.content}\n                    onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n                    className=\"form-textarea\"\n                    required\n                  />\n                </div>\n\n                {/* Submit Button */}\n                <div className=\"form-actions\">\n                  <button type=\"submit\" disabled={submitting} className=\"btn btn-primary\">\n                    {submitting ? (\n                      <>\n                        <LoadingSpinner size=\"sm\" />\n                        <span>Submitting...</span>\n                      </>\n                    ) : (\n                      \"Submit Review\"\n                    )}\n                  </button>\n                  <button type=\"button\" onClick={() => navigate(-1)} disabled={submitting} className=\"btn btn-outline\">\n                    Cancel\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default NewReviewPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}